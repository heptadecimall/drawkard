<div class="dot-bg min-h-screen">
  <div class="container mx-auto min-h-screen py-20 flex flex-col justify-center items-center">
    <div class="flex flex-col items-center justify-center">
      <div class=" flex flex-col md:flex-row justify-center items-center mb-4">

        <!-- card showcase -->
        <div>
          <div class="flex flex-col md:flex-row items-center gap-4  mx-4">
            <div class=" flex flex-col justify-center items-center gap-2 ">
              <div class=" w-60 h-83  rounded-xl overflow-hidden shadow-lg relative transition-all duration-300"
                [style.transform]="'rotate(' + rotationDeg + 'deg)'" [class.md:mr-12]="(rotationDeg / 90) % 2 !== 0"
                [class.sm:mt-12]="(rotationDeg / 90) % 2 !== 0"
                [ngClass]="isFlipped ? 'transform rotate-x-15 -rotate-y-30':''">

                <div
                  class="w-60 h-83 checkerboard-bg rounded-xl overflow-hidden shadow-lg transition-transform duration-300 preserve-3d"
                  [style.transform]="isFlipped ? 'rotateY(180deg) rotateX(10deg)' : 'rotateY(0deg)'">
                  <img *ngIf="cardData" class=" rounded shadow relative"
                    [src]="displayImageUrl || getFlippedCard()?.image_uris?.normal" [alt]="cardData?.name"
                    (load)="onImageLoad()">
                  <svg *ngIf="isLoading" class="animate-spin absolute top-35 left-22" width="64px" height="64px"
                    viewBox="0 0 64 64" version="1.1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
                    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
                    fill="#000000">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                      <rect id="Icons" x="-1024" y="-64" width="1280" height="800" style="fill:none;"></rect>
                      <g id="Icons1" serif:id="Icons">
                        <g id="Strike"> </g>
                        <g id="H1"> </g>
                        <g id="H2"> </g>
                        <g id="H3"> </g>
                        <g id="list-ul"> </g>
                        <g id="hamburger-1"> </g>
                        <g id="hamburger-2"> </g>
                        <g id="list-ol"> </g>
                        <g id="list-task"> </g>
                        <g id="trash"> </g>
                        <g id="vertical-menu"> </g>
                        <g id="horizontal-menu"> </g>
                        <g id="sidebar-2"> </g>
                        <g id="Pen"> </g>
                        <g id="Pen1" serif:id="Pen"> </g>
                        <g id="clock"> </g>
                        <g id="external-link"> </g>
                        <g id="hr"> </g>
                        <g id="info"> </g>
                        <g id="warning"> </g>
                        <g id="plus-circle"> </g>
                        <g id="minus-circle"> </g>
                        <g id="vue"> </g>
                        <g id="cog"> </g>
                        <g id="logo"> </g>
                        <g id="radio-check"> </g>
                        <g id="eye-slash"> </g>
                        <g id="eye"> </g>
                        <g id="toggle-off"> </g>
                        <g id="shredder"> </g>
                        <g id="spinner--loading--dots-" serif:id="spinner [loading, dots]">
                          <path
                            d="M46.03,32c0,-2.751 2.233,-4.985 4.985,-4.985c2.751,0 4.985,2.234 4.985,4.985c0,2.751 -2.234,4.985 -4.985,4.985c-2.752,0 -4.985,-2.234 -4.985,-4.985Z"
                            style="fill:#d9d9d9;"></path>
                          <path
                            d="M41.92,41.92c1.946,-1.945 5.105,-1.945 7.051,0c1.945,1.946 1.945,5.105 0,7.051c-1.946,1.945 -5.105,1.945 -7.051,0c-1.945,-1.946 -1.945,-5.105 0,-7.051Z"
                            style="fill:#b3b3b3;"></path>
                          <circle cx="32" cy="51.015" r="4.985" style="fill:#8c8c8c;"></circle>
                          <path
                            d="M22.08,41.92c1.945,1.946 1.945,5.105 0,7.051c-1.946,1.945 -5.105,1.945 -7.051,0c-1.945,-1.946 -1.945,-5.105 0,-7.051c1.946,-1.945 5.105,-1.945 7.051,0Z"
                            style="fill:#666;"></path>
                          <path
                            d="M17.97,32c0,2.751 -2.233,4.985 -4.985,4.985c-2.751,0 -4.985,-2.234 -4.985,-4.985c0,-2.751 2.234,-4.985 4.985,-4.985c2.752,0 4.985,2.234 4.985,4.985Z"
                            style="fill:#404040;"></path>
                          <path
                            d="M22.08,22.08c-1.946,1.945 -5.105,1.945 -7.051,0c-1.945,-1.946 -1.945,-5.105 0,-7.051c1.946,-1.945 5.105,-1.945 7.051,0c1.945,1.946 1.945,5.105 0,7.051Z"
                            style="fill:#404040;"></path>
                          <circle cx="32" cy="12.985" r="4.985"></circle>
                        </g>
                        <g id="react"> </g>
                        <g id="check-selected"> </g>
                        <g id="turn-off"> </g>
                        <g id="code-block"> </g>
                        <g id="user"> </g>
                        <g id="coffee-bean"> </g>
                        <g id="coffee-beans">
                          <g id="coffee-bean1" serif:id="coffee-bean"> </g>
                        </g>
                        <g id="coffee-bean-filled"> </g>
                        <g id="coffee-beans-filled">
                          <g id="coffee-bean2" serif:id="coffee-bean"> </g>
                        </g>
                        <g id="clipboard"> </g>
                        <g id="clipboard-paste"> </g>
                        <g id="clipboard-copy"> </g>
                        <g id="Layer1"> </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <!-- flip card btn -->
                <button *ngIf="isDoubleSidedCard() && cardData"
                  class="absolute bottom-50 right-15 m-2 border border-gray-300 bg-white/10 backdrop-blur-none text-white hover:backdrop-blur-sm rounded-full bg-gray-100 p-3 cursor-pointer "
                  (click)="flipCard()">
                  <svg fill="currentColor" width="20px" height="20px" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                      <g data-name="Layer 2">
                        <g data-name="flip-2">
                          <rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"></rect>
                          <path
                            d="M6.09 19h12l-1.3 1.29a1 1 0 0 0 1.42 1.42l3-3a1 1 0 0 0 0-1.42l-3-3a1 1 0 0 0-1.42 0 1 1 0 0 0 0 1.42l1.3 1.29h-12a1.56 1.56 0 0 1-1.59-1.53V13a1 1 0 0 0-2 0v2.47A3.56 3.56 0 0 0 6.09 19z">
                          </path>
                          <path
                            d="M5.79 9.71a1 1 0 1 0 1.42-1.42L5.91 7h12a1.56 1.56 0 0 1 1.59 1.53V11a1 1 0 0 0 2 0V8.53A3.56 3.56 0 0 0 17.91 5h-12l1.3-1.29a1 1 0 0 0 0-1.42 1 1 0 0 0-1.42 0l-3 3a1 1 0 0 0 0 1.42z">
                          </path>
                        </g>
                      </g>
                    </g>
                  </svg>
                </button>
              </div>
            </div>

            <!-- card description panel -->
            <div *ngIf="cardData"
              class="border border-gray-400 rounded-lg bg-white/10 backdrop-blur-sm p-4 w-full max-w-90 shadow-lg ">
              <p class="text-left text-gray-500 font-semibold">#{{cardData?.collector_number}}</p>
              <div class="flex justify-between">
                <h2 class="font-bold">{{getFlippedCard()?.name}}</h2>
                <div *ngIf="symbolData" class="flex flex-row gap-1">
                  @for (symbol of mappedSymbols(getFlippedCard()?.mana_cost || ''); track symbol) {
                  <img [src]="symbol?.svg_uri" [alt]="symbol?.symbol" class="w-4 h-auto">
                  }
                </div>
              </div>
              <h2 *ngIf="getFlippedCard()?.type_line">{{getFlippedCard()?.type_line}}</h2>
              <hr class="border-gray-400 my-2">
              <p>{{getFlippedCard()?.oracle_text}}</p>
              <div *ngIf="getFlippedCard()?.power || getFlippedCard()?.toughness">
                <p class="text-right">{{getFlippedCard()?.power || '0'}}/{{getFlippedCard()?.toughness || '0'}}</p>
                <hr class="border-gray-400 my-2 ">
              </div>
              <div *ngIf="getFlippedCard()?.flavor_text">
                <p class="italic mb-4">{{getFlippedCard()?.flavor_text}}</p>
                <hr class="border-gray-400 my-2 ">
              </div>
              <div>
                <p class="text-sm">[{{cardData?.set | uppercase}}] {{cardData?.set_name}}</p>
                <hr class="border-gray-400 my-2">
              </div>
              <div>
                <p class="text-xs text-right">Illustrated by {{cardData?.artist}} </p>
                <hr class="border-gray-400 my-2">
              </div>
              <p class="text-xs  text-right">{{cardData?.rarity |titlecase}} - {{'$ '+ cardData?.prices?.usd ||
                'n/a'}}
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- action btn -->
      <div class="flex gap-2 justify-center items-center my-2">
        <!-- draw btn on mobile screen -->
        <button
          class="border border-gray-400 text-gray-500 rounded-md bg-gray-100 py-2 px-4 cursor-pointer hover:bg-gray-200 "
          (click)="fetchRandomCard()">
          Draw a kard
        </button>
        <!-- rotate card btn -->
        <button *ngIf="cardData"
          class="border border-gray-400 text-gray-500 rounded-md bg-gray-100 p-2  cursor-pointer hover:bg-gray-200"
          (click)="rotateCard()">
          <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M17.7629 2.0007C17.211 2.02117 16.7802 2.48517 16.8007 3.03708L16.8985 5.67483C15.5455 4.62548 13.846 4.00001 12 4.00001C7.58172 4.00001 4 7.58174 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68631 8.68629 6.00001 12 6.00001C13.5794 6.00001 15.0168 6.60994 16.089 7.60891L12.6839 8.00677C12.1354 8.07087 11.7427 8.56751 11.8068 9.11607C11.8709 9.66462 12.3675 10.0574 12.9161 9.99326L18.1161 9.38567C18.6341 9.32514 19.0186 8.87659 18.9993 8.35536L18.7993 2.96295C18.7788 2.41104 18.3148 1.98023 17.7629 2.0007Z"
                fill="currentColor"></path>
            </g>
          </svg>
        </button>
      </div>

      <!-- card type filter badge btn -->
      <div *ngIf="cardTypeData" class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Card Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        <button class="cursor-pointer" (click)="selectCardType('card','')">
          <span [ngClass]="selectedCardType === '' ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            All
          </span>
        </button>
        @for (type of cardTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('card',type)">
          <span [ngClass]="selectedCardType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- artifact type filter badge btn -->
      <div *ngIf="selectedCardType === 'Artifact'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Artifact Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of artifactTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Artifact',type)">
          <span [ngClass]="selectedArtifactType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- battle type filter badge btn -->
      <div *ngIf="selectedCardType === 'Battle'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Battle Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of battleTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Battle',type)">
          <span [ngClass]="selectedBattleType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- battle type filter badge btn -->
      <div *ngIf="selectedCardType === 'Creature'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Creature Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of creatureTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Creature',type)">
          <span [ngClass]="selectedCreatureType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- enchantment type filter badge btn -->
      <div *ngIf="selectedCardType === 'Enchantment'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Enchantment Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of enchantmentTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Enchantment',type)">
          <span [ngClass]="selectedEnchantmentType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- spell type filter badge btn -->
      <div *ngIf="selectedCardType === 'Sorcery' || selectedCardType === 'Instant'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Spell Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of spellTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Spell',type)">
          <span [ngClass]="selectedSpellType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- land type filter badge btn -->
      <div *ngIf="selectedCardType === 'Land'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Land Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of landTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Land',type)">
          <span [ngClass]="selectedLandType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>

      <!-- planeswalker type filter badge btn -->
      <div *ngIf="selectedCardType === 'Planeswalker'"
        class="container mx-auto w-full flex flex-wrap justify-center items-center gap-2 p-2">
        <div class="flex items-center w-full">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="flex-shrink mx-4 text-gray-500 text-xs">Planeswalker Types</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>
        @for (type of planeswalkerTypeData.data;track type){
        <button class="cursor-pointer" (click)="selectCardType('Planeswalker',type)">
          <span [ngClass]="selectedPlaneswalkerType === type ? 
        'bg-green-400/50 shadow-sm scale-110 font-bold text-white ring-green-400' : 
        'bg-gray-400/50 '"
            class="inline-flex items-center rounded-md bg-gray-400/50 hover:bg-gray-400/30 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-100 inset-ring inset-ring-gray-400/20">
            {{type}}
          </span>
        </button>
        }
      </div>
    </div>
  </div>
</div>